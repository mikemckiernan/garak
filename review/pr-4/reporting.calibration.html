

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calibration &mdash; garak  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            garak
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Using garak</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="how.html">How <code class="docutils literal notranslate"><span class="pre">garak</span></code> runs</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="configurable.html">Configuring <code class="docutils literal notranslate"><span class="pre">garak</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="cliref.html">CLI reference for garak</a></li>
<li class="toctree-l1"><a class="reference internal" href="reporting.html">Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="translation.html">Translation support</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/NVIDIA/garak/blob/main/FAQ.md">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="basic.html">Key Concepts and Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="attempt.html">garak.attempt</a></li>
<li class="toctree-l1"><a class="reference internal" href="buffs.html">garak.buffs</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">garak.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="command.html">garak.command</a></li>
<li class="toctree-l1"><a class="reference internal" href="detectors.html">garak.detectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="evaluators.html">garak.evaluators</a></li>
<li class="toctree-l1"><a class="reference internal" href="exception.html">garak.exception</a></li>
<li class="toctree-l1"><a class="reference internal" href="generators.html">garak.generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="harnesses.html">garak.harnesses</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive.html">garak.interactive</a></li>
<li class="toctree-l1"><a class="reference internal" href="langservice.html">garak.langservice</a></li>
<li class="toctree-l1"><a class="reference internal" href="payloads.html">garak.payloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="probes.html">garak.probes</a></li>
<li class="toctree-l1"><a class="reference internal" href="report.html">garak.report</a></li>
<li class="toctree-l1"><a class="reference internal" href="_config.html">garak._config</a></li>
<li class="toctree-l1"><a class="reference internal" href="_plugins.html">garak._plugins</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Extending and Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="extending.html">Extending <code class="docutils literal notranslate"><span class="pre">garak</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="extending.generator.html">Let’s build a generator!</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending.probe.html">Writing a Probe</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to <code class="docutils literal notranslate"><span class="pre">garak</span></code></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">garak</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Calibration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/reporting.calibration.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="calibration">
<h1>Calibration<a class="headerlink" href="#calibration" title="Link to this heading"></a></h1>
<section id="are-my-scores-good">
<h2>Are my scores good?<a class="headerlink" href="#are-my-scores-good" title="Link to this heading"></a></h2>
<p>Garak scores are interpreted compared to the state of the art.
Using a “bag” of models and the results across those, we calibrate scores based on how those models perform on various probes and detectors.
The scores we get from the surveyed models are used to get a distribution of possible garak scores.
When surveying a target model, its pass rate is compared to the average and variation we see across state of the art models in order to estimate how well the target model is doing.</p>
</section>
<section id="what-models-are-compared-against">
<h2>What models are compared against?<a class="headerlink" href="#what-models-are-compared-against" title="Link to this heading"></a></h2>
<p>We look for the following things when composing the model bag for calibrating garak results:</p>
<ul class="simple">
<li><p><strong>Quantity</strong> - There should be enough models in the bag to get usable results, and few enough to make running the experiments tractable</p></li>
<li><p><strong>Recency</strong> - Older models can give uncompetitive results, so we want recent ones. On the other hand, updating the bag very frequently makes it hard to compare results between garak runs.</p></li>
<li><p><strong>Size</strong> - We want models over a variety of sizes. Size is measured in parameter count, regardless of quantisation, and we look for models with 1-10B, 11-99B, and 100B+ parameters.</p></li>
<li><p><strong>Provider</strong> - No more than two models in the bag from the same provider</p></li>
<li><p><strong>Openness</strong> - Open weights models are easiest for us to survey, so we prefer to use those</p></li>
</ul>
<p>One can read about which models are in the current calibration, and what configuration was used, from the source in <a class="reference external" href="https://github.com/NVIDIA/garak/blob/main/garak/data/calibration/bag.md">bag.md</a>.</p>
</section>
<section id="z-scores">
<h2>Z-scores<a class="headerlink" href="#z-scores" title="Link to this heading"></a></h2>
<p>Each probe &amp; detector pair yields an attack success rate / pass rate (pass rate = 1-ASR). We measure the pass rate for each of the detectors that each probe requests. We then calculate the mean pass rate and standard deviation across all the models, as well as the Shapiro-Wilk p-value to gauge how well the scores follow a normal distribution. This mean and standard deviation tell us how well the bag does at a particular probe &amp; model.</p>
<p>When assessing a target, we calculate a “Z-score”. Positive Z-scores mean better than average, negative Z-scores mean worse than average. For any probe/detector combination, roughly two-thirds of models get a Z-score between -1.0 and +1.0. The middle 10% of models score -0.125 to +0.125. This is labelled “competitive”. A Z-score of +1.0 means the score was one standard deviation better than the mean score other models achieved for this probe &amp; detector.</p>
<ul class="simple">
<li><p>Over +1: much better than average</p></li>
<li><p>Around +0.1 to -0.1: average</p></li>
<li><p>Below -1: much worse than average</p></li>
</ul>
<p>It’s possible to get a great Z-score and a low absolute score. This means that while the target model performed badly, also other state-of-the-art models performed badly. Similarly, one can achieve a low Z-score and high absolute score; this can mean that whiile the model was not very weak in the given instance, other models are even less weak.</p>
<p>We artifically bound standard deviations at a non-zero minimum, to represent the inherent uncertainty in using an incomplete sample of all LLMs, and to make Z-score calculation possible even when the bag perfectly agrees.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023-, Leon Derczynski.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>